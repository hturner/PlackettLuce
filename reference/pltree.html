<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Recursive partitioning based on Plackett-Luce models."><title>Plackett-Luce Trees — pltree • PlackettLuce</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Plackett-Luce Trees — pltree"><meta property="og:description" content="Recursive partitioning based on Plackett-Luce models."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">PlackettLuce</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.3</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Overview.html">Introduction to PlackettLuce</a>
    <a class="dropdown-item" href="../articles/PLADMM.html">Plackett-Luce Models with Item Covariates</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/hturner/PlackettLuce/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Plackett-Luce Trees</h1>
      <small class="dont-index">Source: <a href="https://github.com/hturner/PlackettLuce/blob/HEAD/R/pltree.R" class="external-link"><code>R/pltree.R</code></a></small>
      <div class="d-none name"><code>pltree.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Recursive partitioning based on Plackett-Luce models.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">pltree</span><span class="op">(</span><span class="va">formula</span>, <span class="va">data</span>, <span class="va">worth</span>, <span class="va">na.action</span>, <span class="va">cluster</span>, ref <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>formula</dt>
<dd><p>A symbolic description of the model to be fitted, of the form
<code>y ~ x1 + ... + xn</code> where <code>y</code> should be an object of class
<code><a href="PlackettLuce-deprecated.html">grouped_rankings</a></code> and <code>x1</code>, ..., <code>xn</code> are used as
partitioning variables.</p></dd>


<dt>data</dt>
<dd><p>An optional data object containing the variables in the model.
Either a data frame of variables in <code>formula</code> or a list of length 2 giving
data frames for variables in <code>formula</code> and in <code>worth</code>.</p></dd>


<dt>worth</dt>
<dd><p>A optional formula specifying a linear model for log-worth.
If <code>NULL</code>, worth is estimated separately for each item with
<code><a href="PlackettLuce.html">PlackettLuce()</a></code>. Otherwise, the model in each node of the tree id fitted
with <code><a href="pladmm.html">pladmm()</a></code>.</p></dd>


<dt>na.action</dt>
<dd><p>how NAs are treated for variables in <code>formula</code>, applied
to the underlying rankings.</p></dd>


<dt>cluster</dt>
<dd><p>an optional vector of cluster IDs to be employed for clustered
covariances in the parameter stability tests, see <code><a href="https://rdrr.io/pkg/partykit/man/mob.html" class="external-link">mob</a></code>.</p></dd>


<dt>ref</dt>
<dd><p>an integer or character string specifying the reference item (for
which log ability will be set to zero). If NULL the first item is used.</p></dd>


<dt>...</dt>
<dd><p>additional arguments, passed to <code><a href="PlackettLuce.html">PlackettLuce</a></code>
of <code><a href="pladmm.html">pladmm()</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>An object of class <code>"pltree"</code> inheriting from <code>"bttree"</code></p>


<p>and <code>"modelparty"</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Plackett-Luce trees are an application of model-based recursive partitioning
(implemented in <code><a href="https://rdrr.io/pkg/partykit/man/mob.html" class="external-link">mob</a></code>) to Plackett-Luce models for
rankings. The partitioning is based on ranking covariates, e.g. attributes of
the judge making the ranking, or conditions under which the ranking is made.
The response should be a <code><a href="PlackettLuce-deprecated.html">grouped_rankings</a></code> object that groups
rankings with common covariate values. This may be included in a data frame
alongside the covariates.</p>
<p>Most arguments of <code>PlackettLuce</code> can be passed on by <code>pltree</code>.
However, Plackett-Luce tree with fixed adherence are not implemented.
Arguably it makes more sense to estimate adherence or reliability within
the nodes of the Plackett-Luce tree.</p>
<p>Various methods are provided for <code>"pltree"</code> objects, most of them
inherited from <code>"modelparty"</code> objects (e.g. <code>print</code>,
<code>summary</code>), or <code>"bttree"</code> objects (<code>plot</code>). The plot
method employs the <code><a href="https://rdrr.io/pkg/psychotree/man/node_btplot.html" class="external-link">node_btplot</a></code>
panel-generating function. The See Also
section gives details of separately documented methods.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://rdrr.io/pkg/psychotree/man/bttree.html" class="external-link">bttree</a></code> For fitting Bradley-Terry trees
(equivalent to the Plackett-Luce model for paired comparisons without ties).</p>
<p><code>coef</code>, <code>vcov</code>, <code>AIC</code> and <code>predict</code> methods are documented on
<code><a href="pltree-summaries.html">pltree-summaries</a></code>.</p>
<p><code><a href="itempar.PlackettLuce.html">itempar</a></code>, extracts the abilities or item parameters
in each node of the tree using <code><a href="itempar.PlackettLuce.html">itempar.PlackettLuce</a></code>.</p>
<p><code><a href="fitted.PlackettLuce.html">fitted</a></code>, computes probabilities for the observed
choices based on the full tree.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Bradley-Terry example</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va">psychotree</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="co">## Germany's Next Topmodel 2007 data</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"Topmodel2007"</span>, package <span class="op">=</span> <span class="st">"psychotree"</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="co">## convert paircomp object to grouped rankings</span></span></span>
<span class="r-in"><span>    <span class="va">R</span> <span class="op">&lt;-</span> <span class="fu"><a href="group.html">as.grouped_rankings</a></span><span class="op">(</span><span class="va">Topmodel2007</span><span class="op">$</span><span class="va">preference</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="co">## rankings are grouped by judge</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">R</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,<span class="op">]</span>, max <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="co">## Topmodel2007[, -1] gives covariate values for each judge</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">Topmodel2007</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>    <span class="co">## fit partition model based on all variables except preference</span></span></span>
<span class="r-in"><span>    <span class="co">## set npseudo = 0 as all judges rank all models</span></span></span>
<span class="r-in"><span>    <span class="va">tm_tree</span> <span class="op">&lt;-</span> <span class="fu">pltree</span><span class="op">(</span><span class="va">R</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">Topmodel2007</span><span class="op">[</span>, <span class="op">-</span><span class="fl">1</span><span class="op">]</span>, minsize <span class="op">=</span> <span class="fl">5</span>,</span></span>
<span class="r-in"><span>                      npseudo <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>    <span class="co">## plot shows abilities constrained to sum to 1</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">tm_tree</span>, abbreviate <span class="op">=</span> <span class="fl">1</span>, yscale <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="co">## instead show log-abilities with Anja as reference (need to used index)</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">tm_tree</span>, abbreviate <span class="op">=</span> <span class="fl">1</span>, worth <span class="op">=</span> <span class="cn">FALSE</span>, ref <span class="op">=</span> <span class="fl">6</span>,</span></span>
<span class="r-in"><span>         yscale <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1.5</span>, <span class="fl">2.2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>    <span class="co">## log-abilities, zero sum contrast</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/pkg/psychotools/man/itempar.html" class="external-link">itempar</a></span><span class="op">(</span><span class="va">tm_tree</span>, log <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required package: psychotree</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required package: partykit</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required package: grid</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required package: libcoin</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required package: mvtnorm</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Attaching package: ‘mvtnorm’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following object is masked from ‘package:gnm’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     Mult</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required package: psychotools</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                                   1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "Barbara &gt; Anni, Barbara &gt; Hana, Anni &gt; Hana, Barbara &gt; Fiona, ..." </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                                   2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "Anni &gt; Barbara, Hana &gt; Barbara, Hana &gt; Anni, Fiona &gt; Barbara, ..." </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   gender age  q1  q2  q3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   male  66  no  no  no</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   male  21 yes yes yes</span>
<span class="r-plt img"><img src="pltree-1.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="pltree-2.png" alt="" width="700" height="433"></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Barbara       Anni       Hana      Fiona       Mandy       Anja</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.3252815  0.2193055 1.03734300 -0.1785927 -0.39080852 -1.0125288</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 0.1106734 -0.2392155 0.51830152  0.3662483 -0.42801793 -0.3279899</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 0.5715647  0.3486194 0.06927133  0.2590188 -0.87250735 -0.3759669</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7 0.5343475 -1.0000476 0.01067104  0.0575107  0.08093274  0.3165856</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Heather Turner, Ioannis Kosmidis, David Firth.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

