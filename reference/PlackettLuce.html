<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Fit a Plackett-Luce model to a set of rankings. The rankings may be partial
(each ranking completely ranks a subset of the items) and include ties of
arbitrary order."><title>Fit a Plackett-Luce Model — PlackettLuce • PlackettLuce</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Fit a Plackett-Luce Model — PlackettLuce"><meta property="og:description" content="Fit a Plackett-Luce model to a set of rankings. The rankings may be partial
(each ranking completely ranks a subset of the items) and include ties of
arbitrary order."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">PlackettLuce</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Overview.html">Introduction to PlackettLuce</a>
    <a class="dropdown-item" href="../articles/PLADMM.html">Plackett-Luce Models with Item Covariates</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/hturner/PlackettLuce/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Fit a Plackett-Luce Model</h1>
      <small class="dont-index">Source: <a href="https://github.com/hturner/PlackettLuce/blob/HEAD/R/PlackettLuce.R" class="external-link"><code>R/PlackettLuce.R</code></a></small>
      <div class="d-none name"><code>PlackettLuce.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Fit a Plackett-Luce model to a set of rankings. The rankings may be partial
(each ranking completely ranks a subset of the items) and include ties of
arbitrary order.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">PlackettLuce</span><span class="op">(</span></span>
<span>  <span class="va">rankings</span>,</span>
<span>  npseudo <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  normal <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  gamma <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  adherence <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  weights <span class="op">=</span> <span class="fu"><a href="aggregate.html">freq</a></span><span class="op">(</span><span class="va">rankings</span><span class="op">)</span>,</span>
<span>  na.action <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"na.action"</span><span class="op">)</span>,</span>
<span>  start <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"iterative scaling"</span>, <span class="st">"BFGS"</span>, <span class="st">"L-BFGS"</span><span class="op">)</span>,</span>
<span>  epsilon <span class="op">=</span> <span class="fl">1e-07</span>,</span>
<span>  steffensen <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  maxit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">500</span>, <span class="fl">10</span><span class="op">)</span>,</span>
<span>  trace <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>rankings</dt>
<dd><p>a <code>"<a href="rankings.html">rankings</a>"</code> object, or an object that can be
coerced by <code>as.rankings</code>.  An <code><a href="aggregate.html">"aggregated_rankings"</a></code>
object can be used to specify rankings and weights simultaneously.
A <code>"<a href="PlackettLuce-deprecated.html">grouped_rankings</a>"</code> object should be used when estimating
adherence for rankers with multiple rankings per ranker.</p></dd>


<dt>npseudo</dt>
<dd><p>when using pseudodata: the number of wins and losses to add
between each object and a hypothetical reference object.</p></dd>


<dt>normal</dt>
<dd><p>a optional list with elements named <code>mu</code> and <code>Sigma</code>
specifying the mean and covariance matrix of a multivariate normal prior on
the <em>log</em> worths.</p></dd>


<dt>gamma</dt>
<dd><p>a optional list with elements named <code>shape</code> and <code>rate</code>
specifying parameters of a gamma prior on adherence parameters for each
ranker (use <code>grouped_rankings</code> to group multiple rankings by ranker).
The short-cut <code>TRUE</code> may be used to specify a Gamma(10, 10) prior. If
<code>NULL</code> (or <code>FALSE</code>), adherence is fixed to <code>adherence</code> for
all rankers.</p></dd>


<dt>adherence</dt>
<dd><p>an optional vector of adherence values for each ranker. If
missing, adherence is fixed to 1 for all rankers. If <code>gamma</code> is not
<code>NULL</code>, this specifies the starting values for the adherence.</p></dd>


<dt>weights</dt>
<dd><p>an optional vector of weights for each ranking.</p></dd>


<dt>na.action</dt>
<dd><p>a function to handle any missing rankings, see
<code><a href="https://rdrr.io/r/stats/na.fail.html" class="external-link">na.omit()</a></code>.</p></dd>


<dt>start</dt>
<dd><p>starting values for the worth parameters and the tie parameters
on the raw scale (worth parameters need not be scaled to sum to 1). If
<code>normal</code> is specified, <code>exp(normal$mu)</code> is used as starting values
for the worth parameters. Coefficients from a previous fit can be passed as
the result of a call to  <code>coef.PlackettLuce</code>, or the <code>coefficients</code>
element of a <code>"PlackettLuce"</code> object.</p></dd>


<dt>method</dt>
<dd><p>the method to be used for fitting: <code>"iterative scaling"</code>
(iterative scaling to sequentially update the parameter values),
<code>"BFGS"</code> (the BFGS optimisation algorithm through the
<code><a href="https://rdrr.io/r/stats/optim.html" class="external-link">optim</a></code> interface), <code>"L-BFGS"</code> (the limited-memory BFGS
optimisation algorithm as implemented in the <code><a href="https://rdrr.io/pkg/lbfgs/man/lbfgs.html" class="external-link">lbfgs</a></code>
package). Iterative scaling is used by default, unless a prior is specified
by <code>normal</code> or <code>gamma</code>, in which case the default is <code>"BFGS"</code>.</p></dd>


<dt>epsilon</dt>
<dd><p>the maximum absolute difference between the observed and
expected sufficient statistics for the ability parameters at convergence.</p></dd>


<dt>steffensen</dt>
<dd><p>a threshold defined as for <code>epsilon</code> after which to
apply Steffensen acceleration to the iterative scaling updates.</p></dd>


<dt>maxit</dt>
<dd><p>a vector specifying the maximum number of iterations. If
<code>gamma</code> is <code>NULL</code>, only the first element is used and specifies the
maximum number of iterations of the algorithm specified by <code>method</code>. If
<code>gamma</code> is not <code>NULL</code>, a second element may be supplied to specify
the maximum number of iterations of an alternating algorithm, where
the adherence parameters are updated alternately with the other parameters.
The default is to use 10 outer iterations.</p></dd>


<dt>trace</dt>
<dd><p>logical, if <code>TRUE</code> show trace of iterations.</p></dd>


<dt>verbose</dt>
<dd><p>logical, if <code>TRUE</code> show messages from validity checks on
the rankings.</p></dd>


<dt>...</dt>
<dd><p>additional arguments passed to <code>optim</code> or <code>lbfgs</code>.
In particular the convergence tolerance may be adjusted using e.g.
<code>control = list(reltol = 1e-10)</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>An object of class <code>"PlackettLuce"</code>, which is a list containing
the following elements:</p>
<dl><dt>call</dt>
<dd><p>The matched call.</p></dd>

<dt>coefficients</dt>
<dd><p>The model coefficients.</p></dd>

<dt>loglik</dt>
<dd><p>The maximized log-likelihood.</p></dd>

<dt>null.loglik</dt>
<dd><p>The maximized log-likelihood for the null model (all
alternatives including ties have equal probability).</p></dd>

<dt>df.residual</dt>
<dd><p>The residual degrees of freedom.</p></dd>

<dt>df.null</dt>
<dd><p>The residual degrees of freedom for the null model.</p></dd>

<dt>rank</dt>
<dd><p>The rank of the model.</p></dd>

<dt>logposterior</dt>
<dd><p>If a prior was specified, the maximised log posterior.</p></dd>

<dt>gamma</dt>
<dd><p>If a gamma prior was specified, the list of parameters.</p></dd>

<dt>normal</dt>
<dd><p>If a normal prior was specified, the list of parameters.</p></dd>

<dt>iter</dt>
<dd><p>The number of iterations run.</p></dd>

<dt>rankings</dt>
<dd><p>The rankings passed to <code>rankings</code>, converted to a
<code>"rankings"</code> object if necessary.</p></dd>

<dt>weights</dt>
<dd><p>The weights applied to each ranking in the fitting.</p></dd>

<dt>adherence</dt>
<dd><p>The fixed or estimated adherence per ranker.</p></dd>

<dt>ranker</dt>
<dd><p>The ranker index mapping rankings to rankers (the
<code>"index"</code> attribute of <code>rankings</code> if specified as a
<code>"grouped_rankings"</code> object.)</p></dd>

<dt>ties</dt>
<dd><p>The observed tie orders corresponding to the estimated tie
parameters.</p></dd>

<dt>conv</dt>
<dd><p>The convergence code: 0 for successful convergence; 1 if reached
<code>maxit</code> (outer) iterations without convergence; 2 if Steffensen
acceleration cause log-likelihood to increase; negative number if L-BFGS
algorithm failed for other reason.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>As the maximum tie order increases, the number of possible choices for
each rank increases rapidly, particularly when the total number of items is
high. This means that the model will be slower to fit with higher \(D\).
In addition, due to the current implementation of the <code><a href="https://rdrr.io/r/stats/vcov.html" class="external-link">vcov()</a></code> method,
computation of the standard errors (as by <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code>) can take almost as
long as the model fit and may even become infeasible due to memory limits.
As a rule of thumb, for &gt; 10 items and &gt; 1000 rankings, we recommend
<code>PlackettLuce()</code> for ties up to order 4. For higher order ties, a
rank-ordered logit model, see <code><a href="https://rdrr.io/pkg/ROlogit/man/rologit.html" class="external-link">ROlogit::rologit()</a></code> or
generalized Mallows Model as in <code><a href="https://rdrr.io/pkg/BayesMallows/man/compute_mallows.html" class="external-link">BayesMallows::compute_mallows()</a></code> may be
more suitable, as they do not model tied events explicitly.</p>
    </div>
    <div class="section level2">
    <h2 id="model-definition">Model definition<a class="anchor" aria-label="anchor" href="#model-definition"></a></h2>
    


<p>A single ranking is given by
$$R = \{C_1, C_2, \ldots, C_J\}$$
where the items in set \(C_1\) are ranked higher than (better than) the
items in \(C_2\), and so on. If there are multiple objects in set \(C_j\)
these items are tied in the ranking.</p>
<p>For a set if items \(S\), let
$$f(S) = \delta_{|S|}
      \left(\prod_{i \in S} \alpha_i \right)^\frac{1}{|S|}$$
where \(|S|\) is the cardinality (size) of the set, \(\delta_n\)
is a parameter related to the prevalence of ties of order \(n\)
(with \(\delta_1 \equiv 1\)), and \(\alpha_i\) is a
parameter representing the worth of item \(i\).
Then under an extension of the Plackett-Luce model allowing ties up to order
\(D\), the probability of the ranking \(R\) is given by
$$\prod_{j = 1}^J \frac{f(C_j)}{
      \sum_{k = 1}^{\min(D_j, D)} \sum_{S \in {A_j \choose k}} f(S)}$$
where \(D_j\) is the cardinality of \(A_j\), the set of
alternatives from which \(C_j\) is chosen, and
\(A_j \choose k\) is all the possible choices of \(k\)
items from \(A_j\). The value of \(D\) can be set to the maximum number
of tied items observed in the data, so that \(\delta_n = 0\)
for \(n &gt; D\).</p>
<p>When the worth parameters are constrained to sum to one, they represent the
probability that the corresponding item comes first in a ranking of all
items, given that first place is not tied.</p>
<p>The 2-way tie prevalence parameter \(\delta_2\) is related to
the probability that two items <em>of equal worth</em> tie for
first place, given that the first place is not a 3-way or higher tie.
Specifically, that probability is
\(\delta_2/(2 + \delta_2)\).</p>
<p>The 3-way and higher tie-prevalence parameters are similarly interpretable,
in terms of tie probabilities among equal-worth items.</p>
<p>When intermediate tie orders are not observed (e.g. ties of order 2
and order 4 are observed, but no ties of order 3), the maximum
likelihood estimate of the corresponding tie prevalence parameters
is zero, so these parameters are excluded from the model.</p>
    </div>
    <div class="section level2">
    <h2 id="pseudo-rankings">Pseudo-rankings<a class="anchor" aria-label="anchor" href="#pseudo-rankings"></a></h2>
    


<p>In order for the maximum likelihood estimate of an object's worth to be
defined, the network of rankings must be strongly connected. This means that
in every possible partition of the objects into two nonempty subsets, some
object in the second set is ranked higher than some object in the first set
at least once.</p>
<p>If the network of rankings is not strongly connected then pseudo-rankings
may be used to connect the network. This approach posits a hypothetical
object with log-worth 0 and adds <code>npseudo</code> wins and <code>npseudo</code>
losses to the set of rankings.</p>
<p>The parameter <code>npseudo</code> is the prior strength.  With <code>npseudo = 0</code>
the MLE is the posterior mode.  As <code>npseudo</code> approaches
infinity the log-worth estimates all shrink towards 0. The default,
<code>npseudo = 0.5</code>, is sufficient to connect the network and has a weak
shrinkage effect. Even for networks that are already connected, adding
pseudo-rankings typically reduces both the bias and variance of the
estimators of the worth parameters.</p>
    </div>
    <div class="section level2">
    <h2 id="incorporating-prior-information-on-log-worths">Incorporating prior information on log-worths<a class="anchor" aria-label="anchor" href="#incorporating-prior-information-on-log-worths"></a></h2>
    


<p>Prior information can be incorporated by using <code>normal</code> to specify a
multivariate normal prior on the <em>log</em>-worths. The log-worths are then
estimated by maximum a posteriori (MAP) estimation. Model summaries
(deviance, AIC, standard errors) are based on the log-likelihood evaluated
at the MAP estimates, resulting in a finite sample bias that should
disappear as the number of rankings increases. Inference based on these
model summaries is valid as long as the prior is considered fixed and not
tuned as part of the model.</p>
<p>Incorporating a prior is an alternative method of penalization, therefore
<code>npseudo</code> is set to zero when a prior is specified.</p>
    </div>
    <div class="section level2">
    <h2 id="incorporating-ranker-adherence-parameters">Incorporating ranker adherence parameters<a class="anchor" aria-label="anchor" href="#incorporating-ranker-adherence-parameters"></a></h2>
    


<p>When rankings come from different rankers, the model can be extended to
allow for varying reliability of the rankers, as proposed by Raman and
Joachims (2014). In particular, replacing \(f(S)\) by
$$h(S) = \delta_{|S|}
      \left(\prod_{i \in S} \alpha_i \right)^\frac{\eta_g}{|S|}$$
where \(\eta_g &gt; 0\) is the adherence parameter for ranker
\(g\). In the standard model, all rankers are assumed to have equal
reliability, so \(\eta_g = 1\) for all rankers.
Higher \(\eta_g = 1\) increases the distance between item
worths, giving greater weight' to the ranker's choice. Conversely, lower
\(\eta_g = 1\) shrinks the item worths towards equality so the
ranker's choice is less relevant.</p>
<p>The adherence parameters are not estimable by maximum likelihood, since
for given item worths the maximum likelihood estimate of adherence would be
infinity for rankers that give rankings consistent with the items ordered by
worth and zero for all other rankers. Therefore it is essential to include a
prior on the adherence parameters when these are estimated rather than fixed.
Setting <code>gamma = TRUE</code> specifies the default
\(\Gamma(10,10)\) prior, which has a mean of
1 and a probability of 0.99 that the adherence is between 0.37 and 2.
Alternative parameters can be specified by a list with elements <code>shape</code>
and <code>rate</code>. Setting scale and rate to a common value \(\theta\)
specifies a mean of 1; \(\theta \ge\) 2 will give low prior
probability to near-zero adherence; as \(\theta\) increases the
density becomes more concentrated (and more symmetrical) about 1.</p>
<p>Since the number of adherence parameters will typically be large and it is
assumed the worth and tie parameters are of primary interest, the adherence
parameters are not included in model summaries, but are included in the
returned object.</p>
    </div>
    <div class="section level2">
    <h2 id="controlling-the-fit">Controlling the fit<a class="anchor" aria-label="anchor" href="#controlling-the-fit"></a></h2>
    


<p>For models without priors, using <code>nspseudo = 0</code> will use standard
maximum likelihood, if the network is connected (and throw an error
otherwise).</p>
<p>The fitting algorithm is set by the <code>method</code> argument. The default
method <code>"iterative scaling"</code> is a slow but reliable approach. In
addition, this has the most control on the accuracy of the final fit, since
convergence is determined by direct comparison of the observed and expected
values of the sufficient statistics for the worth parameters, rather than a
tolerance on change in the log-likelihood.</p>
<p>The <code>"iterative scaling"</code> algorithm is slow because it is a first order
method (does not use derivatives of the likelihood). From a set of starting
values that are 'close enough' to the final solution, the algorithm can be
accelerated using
<a href="https://en.wikipedia.org/wiki/Steffensen" s_method class="external-link">Steffensen's method</a>.
<code>PlackettLuce</code> attempts to apply Steffensen's acceleration when all
differences between the observed and expected values of the sufficient
statistics are less than <code>steffensen</code>. This is an ad-hoc rule defining
'close enough' and in some cases the acceleration may produce negative
worth parameters or decrease the log-likelihood. <code>PlackettLuce</code> will
only apply the update when it makes an improvement.</p>
<p>The <code>"BFGS"</code> and <code>"L-BFGS"</code> algorithms are second order methods,
therefore can be quicker than the default method. Control parameters can be
passed on to <code><a href="https://rdrr.io/r/stats/optim.html" class="external-link">optim</a></code> or <code><a href="https://rdrr.io/pkg/lbfgs/man/lbfgs.html" class="external-link">lbfgs</a></code>.</p>
<p>For models with priors, the iterative scaling method cannot be used, so BFGS
is used by default.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Raman, K. and Joachims, T. (2014)  Methods for Ordinal Peer Grading.
<a href="https://arxiv.org/abs/1404.3656" class="external-link">arXiv:1404.3656</a>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Handling rankings: <code><a href="rankings.html">rankings</a></code>, <code><a href="aggregate.html">aggregate</a></code>,
<code><a href="group.html">group</a></code>, <code><a href="choices.html">choices</a></code>,
<code><a href="adjacency.html">adjacency</a></code>, <code><a href="connectivity.html">connectivity</a></code>.</p>
<p>Inspect fitted Plackett-Luce models: <code><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></code>, <code>deviance</code>,
<code><a href="https://rdrr.io/r/stats/fitted.values.html" class="external-link">fitted</a></code>, <code><a href="https://rdrr.io/pkg/psychotools/man/itempar.html" class="external-link">itempar</a></code>, <code>logLik</code>, <code>print</code>,
<code><a href="https://davidfirth.github.io/qvcalc/reference/qvcalc.html" class="external-link">qvcalc</a></code>, <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></code>, <code><a href="https://rdrr.io/r/stats/vcov.html" class="external-link">vcov</a></code>.</p>
<p>Fit Plackett-Luce tree: <code>pltree</code>.</p>
<p>Example data sets: <code><a href="beans.html">beans</a></code>, <code><a href="nascar.html">nascar</a></code>,
<code><a href="pudding.html">pudding</a></code>, <code><a href="preflib.html">preflib</a></code>.</p>
<p>Vignette: <code><a href="../articles/Overview.html">vignette("Overview", package = "PlackettLuce")</a></code>.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Six partial rankings of four objects, 1 is top rank, e.g</span></span></span>
<span class="r-in"><span><span class="co"># first ranking: item 1, item 2</span></span></span>
<span class="r-in"><span><span class="co"># second ranking: item 2, item 3, item 4, item 1</span></span></span>
<span class="r-in"><span><span class="co"># third ranking: items 2, 3, 4 tie for first place, item 1 second</span></span></span>
<span class="r-in"><span><span class="va">R</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">0</span>, <span class="fl">0</span>,</span></span>
<span class="r-in"><span>              <span class="fl">4</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>,</span></span>
<span class="r-in"><span>              <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>,</span></span>
<span class="r-in"><span>              <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">0</span>,</span></span>
<span class="r-in"><span>              <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">0</span>,</span></span>
<span class="r-in"><span>              <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">3</span>, <span class="fl">2</span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">6</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">R</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"apple"</span>, <span class="st">"banana"</span>, <span class="st">"orange"</span>, <span class="st">"pear"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># create rankings object</span></span></span>
<span class="r-in"><span><span class="va">R</span> <span class="op">&lt;-</span> <span class="fu"><a href="rankings.html">as.rankings</a></span><span class="op">(</span><span class="va">R</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Standard maximum likelihood estimates</span></span></span>
<span class="r-in"><span><span class="va">mod_mle</span> <span class="op">&lt;-</span> <span class="fu">PlackettLuce</span><span class="op">(</span><span class="va">R</span>, npseudo <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="va">mod_mle</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      apple     banana     orange       pear       tie2       tie3 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.0000000  0.2942875 -0.7335113 -0.1190960 -1.8619467 -0.7369735 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Fit with default settings</span></span></span>
<span class="r-in"><span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu">PlackettLuce</span><span class="op">(</span><span class="va">R</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># log-worths are shrunk towards zero</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       apple      banana      orange        pear        tie2        tie3 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.00000000  0.25287379 -0.61350684 -0.08688475 -2.15068111 -0.79245358 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># independent N(0, 9) priors on log-worths, as in Raman and Joachims</span></span></span>
<span class="r-in"><span><span class="va">prior</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>mu <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">R</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>              Sigma <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/diag.html" class="external-link">diag</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">9</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">R</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">mod_normal</span> <span class="op">&lt;-</span> <span class="fu">PlackettLuce</span><span class="op">(</span>rankings <span class="op">=</span> <span class="va">R</span>, normal <span class="op">=</span> <span class="va">prior</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># slightly weaker shrinkage effect vs pseudo-rankings,</span></span></span>
<span class="r-in"><span><span class="co"># with less effect on tie parameters (but note small number of rankings here)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="va">mod_normal</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      apple     banana     orange       pear       tie2       tie3 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.0000000  0.2753696 -0.6772960 -0.1030173 -1.8679502 -0.7453151 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># estimate adherence assuming every ranking is from a separate ranker</span></span></span>
<span class="r-in"><span><span class="va">mod_separate</span> <span class="op">&lt;-</span> <span class="fu">PlackettLuce</span><span class="op">(</span>rankings <span class="op">=</span> <span class="va">R</span>, normal <span class="op">=</span> <span class="va">prior</span>, gamma <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="va">mod_separate</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      apple     banana     orange       pear       tie2       tie3 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.0000000  0.2310944 -0.8436801 -0.1654011 -1.8637839 -0.7405627 </span>
<span class="r-in"><span><span class="co"># gives more weight to rankers 4 &amp; 6 which rank apple first,</span></span></span>
<span class="r-in"><span><span class="co"># so worth of apple increased relative to banana</span></span></span>
<span class="r-in"><span><span class="va">mod_separate</span><span class="op">$</span><span class="va">adherence</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.8889778 0.8732159 0.8876840 0.9431440 0.8818594 0.9506536</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># estimate adherence based on grouped rankings</span></span></span>
<span class="r-in"><span><span class="co">#  - assume two rankings from each ranker</span></span></span>
<span class="r-in"><span><span class="va">G</span> <span class="op">&lt;-</span> <span class="fu"><a href="group.html">group</a></span><span class="op">(</span><span class="va">R</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, each <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">mod_grouped</span> <span class="op">&lt;-</span> <span class="fu">PlackettLuce</span><span class="op">(</span>rankings <span class="op">=</span> <span class="va">G</span>, normal <span class="op">=</span> <span class="va">prior</span>, gamma <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="va">mod_grouped</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      apple     banana     orange       pear       tie2       tie3 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.0000000  0.2855958 -0.7611189 -0.1201862 -1.8678374 -0.7453447 </span>
<span class="r-in"><span><span class="co"># first ranker is least consistent so down-weighted</span></span></span>
<span class="r-in"><span><span class="va">mod_grouped</span><span class="op">$</span><span class="va">adherence</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.8834957 0.9137346 0.9144347</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Heather Turner, Ioannis Kosmidis, David Firth.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

