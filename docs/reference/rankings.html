<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Rankings Object — rankings • PlackettLuce</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  

<meta property="og:title" content="Rankings Object — rankings" />
<meta property="og:description" content="Create a &quot;rankings&quot; object from data or convert a matrix of rankings
or ordered items to a &quot;rankings&quot; object." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">PlackettLuce</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Overview.html">Introduction to PlackettLuce</a>
    </li>
    <li>
      <a href="../articles/PLADMM.html">Plackett-Luce Models with Item Covariates</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/hturner/PlackettLuce/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Rankings Object</h1>
    <small class="dont-index">Source: <a href='https://github.com/hturner/PlackettLuce/blob/master/R/rankings.R'><code>R/rankings.R</code></a></small>
    <div class="hidden name"><code>rankings.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Create a <code>"rankings"</code> object from data or convert a matrix of rankings
or ordered items to a <code>"rankings"</code> object.</p>
    </div>

    <pre class="usage">rankings(data, id, item, rank, aggregate = FALSE, verbose = TRUE, ...)

as.rankings(x, ..., verbose = TRUE)

# S3 method for default
as.rankings(
  x,
  input = c("rankings", "orderings"),
  freq = NULL,
  index = NULL,
  aggregate = FALSE,
  items = NULL,
  labels = NULL,
  ...,
  verbose = TRUE
)

# S3 method for grouped_rankings
as.rankings(x, ..., verbose = TRUE)

# S3 method for matrix
as.rankings(
  x,
  input = c("rankings", "orderings"),
  freq = NULL,
  index = NULL,
  aggregate = FALSE,
  items = NULL,
  labels = NULL,
  ...,
  verbose = TRUE
)

# S3 method for rankings
[(x, i, j, ..., drop = TRUE, as.rankings = TRUE)

# S3 method for rankings
format(x, width = 40L, ...)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>a data frame with columns specified by <code>id</code>, <code>item</code> and
<code>rank</code>.</p></td>
    </tr>
    <tr>
      <th>id</th>
      <td><p>an index of <code>data</code> specifying the column containing ranking
IDs.</p></td>
    </tr>
    <tr>
      <th>item</th>
      <td><p>an index of <code>data</code> specifying the column containing item
IDs,</p></td>
    </tr>
    <tr>
      <th>rank</th>
      <td><p>an index of <code>data</code> specifying the column containing item
ranks.</p></td>
    </tr>
    <tr>
      <th>aggregate</th>
      <td><p>if <code>TRUE</code>, aggregate the rankings via
<code><a href='aggregate.html'>aggregate()</a></code> before returning.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>logical; if <code>TRUE</code> print messages when changes are made
to rankings data.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>further arguments passed to/from methods.</p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p>for <code>as.rankings</code>, a matrix with one column per item and one
row per ranking, or an object that can be coerced to such as matrix; for
<code><a href='https://rdrr.io/r/base/Extract.html'>[</a></code> and <code>format</code>, a <code>"rankings"</code> object.</p></td>
    </tr>
    <tr>
      <th>input</th>
      <td><p>for <code>as.rankings</code>, whether rows in the input matrix
contain numeric <code>"rankings"</code> (dense, standard/modified competition or
fractional rankings) or <code>"orderings"</code>, i.e. the items ordered by rank.</p></td>
    </tr>
    <tr>
      <th>freq</th>
      <td><p>an optional column index (number, character or logical)
specifying a column of <code>x</code> that holds ranking frequencies, or a vector
of ranking frequencies. If provided, an <code>"aggregated_rankings"</code> object
will be returned.</p></td>
    </tr>
    <tr>
      <th>index</th>
      <td><p>an optional column index (number, character or logical)
specifying a column of <code>x</code> that holds a grouping index, or a
numeric vector to for grouping. If provided, the rankings will be grouped by
<code><a href='group.html'>group()</a></code> before returning.</p></td>
    </tr>
    <tr>
      <th>items</th>
      <td><p>for <code>input = "orderings"</code>, a character vector specifying
the full set of items. Values in <code>x</code> are matched to this by value (if
character) or position (if numeric). Use <code><a href='decode.html'>decode()</a></code> for orderings requiring
more complex decoding.</p></td>
    </tr>
    <tr>
      <th>labels</th>
      <td><p>for <code>input = "orderings"</code> an optional vector of labels for
the items, corresponding to the sorted unique values of <code>x</code>.</p></td>
    </tr>
    <tr>
      <th>i</th>
      <td><p>indices specifying rankings to extract, as for <code><a href='https://rdrr.io/r/base/Extract.html'>[</a></code>.</p></td>
    </tr>
    <tr>
      <th>j</th>
      <td><p>indices specifying items to extract, as for <code><a href='https://rdrr.io/r/base/Extract.html'>[</a></code>.</p></td>
    </tr>
    <tr>
      <th>drop</th>
      <td><p>if <code>TRUE</code> return single row/column matrices as a vector.</p></td>
    </tr>
    <tr>
      <th>as.rankings</th>
      <td><p>if <code>TRUE</code> return a rankings object, otherwise return
a matrix/vector.</p></td>
    </tr>
    <tr>
      <th>width</th>
      <td><p>the width in number of characters to format each ranking -
rankings that are too wide will be truncated.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>By default, a <code>"rankings"</code> object, which is a
matrix of dense rankings with methods for several generics including
<code><a href='aggregate.html'>aggregate</a></code>, <code><a href='https://rdrr.io/r/base/Extract.html'>[</a></code>, <code>format</code>, <code><a href='https://rdrr.io/r/base/cbind.html'>rbind()</a></code> and
<code><a href='https://rdrr.io/r/base/matrix.html'>as.matrix()</a></code>.</p>
<p>If the object is created with <code>aggregate = TRUE</code>, or ranking frequencies are
specified via <code>freq</code>, the rankings are post-processed to create an
<code>"aggregated_rankings"</code> object.</p>
<p>If a group index is specified via <code>index</code>, the (possibly aggregated) rankings
are post-processed to create a <code>"grouped_rankings"</code> object.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Each ranking in the input data will be converted to a dense ranking, which
rank items from 1 (first place) to \(n_r\) (last place). Items not ranked
should have a rank of 0 or <code>NA</code>. Tied items are given the same rank with no
rank skipped. For example 1, 0, 2, 1, ranks the first and fourth items in
first place and the third item in second place; the second item is unranked.</p>
<p>Records in <code>data</code> with missing <code>id</code> or <code>item</code> are dropped. Duplicated items
in the rankings are resolved if possible: redundant or inconsistent ranks
are set to <code>NA</code>. Rankings with only 1 item are set to <code>NA</code> (rankings with
zero items are automatically treated as <code>NA</code>). Any issues
causing records to be removed or recoded produce a message if
<code>verbose = TRUE</code>.</p>
<p>For <code>as.rankings</code> with <code>input = "orderings"</code>, unused ranks may be filled with
zeroes for numeric <code>x</code> or <code>NA</code>. It is only necessary to have as many columns
as ranks that are used.</p>
<p>The method for <code><a href='https://rdrr.io/r/base/Extract.html'>[</a></code> will return a reduced rankings object by default,
recoding as dense rankings and setting invalid rankings to <code>NA</code> as necessary.
To extract rows and/or columns of the rankings as a matrix or vector,
set <code>as.rankings = FALSE</code>, see examples.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># create rankings from data in long form</span>

<span class='co'># example long form data</span>
<span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>ranking <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>4</span>, each <span class='op'>=</span> <span class='fl'>4</span><span class='op'>)</span>, <span class='fl'>5</span>, <span class='fl'>5</span>, <span class='fl'>5</span><span class='op'>)</span>,
                letter <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>LETTERS</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span>, <span class='fl'>3</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>4</span>, <span class='fl'>2</span><span class='op'>:</span><span class='fl'>5</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span>, <span class='fl'>1</span><span class='op'>)</span><span class='op'>]</span>, <span class='cn'>NA</span>,
                           <span class='va'>LETTERS</span><span class='op'>[</span><span class='fl'>3</span><span class='op'>:</span><span class='fl'>5</span><span class='op'>]</span><span class='op'>)</span>,
                rank <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>4</span><span class='op'>:</span><span class='fl'>1</span>, <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='cn'>NA</span>, <span class='fl'>4</span><span class='op'>)</span>, <span class='fl'>3</span><span class='op'>:</span><span class='fl'>4</span>, <span class='cn'>NA</span>, <span class='cn'>NA</span>, <span class='fl'>1</span>, <span class='fl'>3</span>, <span class='fl'>4</span>, <span class='fl'>2</span>, <span class='fl'>2</span>, <span class='fl'>2</span>, <span class='fl'>3</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># ranking 1 has different rank for same item, but order of items unambiguous</span>
<span class='co'># all ranks are missing in ranking 2</span>
<span class='co'># some ranks are missing in ranking 3</span>
<span class='co'># ranking 4 has inconsistent ranks for two items and a rank with missing item</span>
<span class='co'># ranking 5 is fine - an example of a tie</span>
<span class='fu'><a href='https://rdrr.io/r/base/split.html'>split</a></span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>x</span><span class='op'>$</span><span class='va'>ranking</span><span class='op'>)</span>
</div><div class='output co'>#&gt; $`1`
#&gt;   ranking letter rank
#&gt; 1       1      A    4
#&gt; 2       1      B    3
#&gt; 3       1      C    2
#&gt; 4       1      C    1
#&gt; 
#&gt; $`2`
#&gt;   ranking letter rank
#&gt; 5       2      A   NA
#&gt; 6       2      B   NA
#&gt; 7       2      C   NA
#&gt; 8       2      D   NA
#&gt; 
#&gt; $`3`
#&gt;    ranking letter rank
#&gt; 9        3      B    3
#&gt; 10       3      C    4
#&gt; 11       3      D   NA
#&gt; 12       3      E   NA
#&gt; 
#&gt; $`4`
#&gt;    ranking letter rank
#&gt; 13       4      A    1
#&gt; 14       4      B    3
#&gt; 15       4      A    4
#&gt; 16       4   &lt;NA&gt;    2
#&gt; 
#&gt; $`5`
#&gt;    ranking letter rank
#&gt; 17       5      C    2
#&gt; 18       5      D    2
#&gt; 19       5      E    3
#&gt; </div><div class='input'>
<span class='co'># fix issues when creating rankings object</span>
<span class='fu'>rankings</span><span class='op'>(</span><span class='va'>x</span>, id <span class='op'>=</span> <span class='st'>"ranking"</span>, item <span class='op'>=</span> <span class='st'>"letter"</span>, rank <span class='op'>=</span> <span class='st'>"rank"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Removed records with unknown id or item</span></div><div class='output co'>#&gt; <span class='message'>Duplicated items within rankings: set redundant/inconsistent to `NA`.</span></div><div class='output co'>#&gt; <span class='message'>Recoded rankings that are not in dense form</span></div><div class='output co'>#&gt; <span class='message'>Rankings with only 1 item set to `NA`</span></div><div class='output co'>#&gt;           1           2           3           4           5 
#&gt;     "B &gt; A"          NA     "B &gt; C"          NA "C = D &gt; E" </div><div class='input'>
<span class='co'># convert existing matrix of rankings</span>

<span class='va'>R</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>2</span>, <span class='fl'>0</span>, <span class='fl'>0</span>,
              <span class='fl'>4</span>, <span class='fl'>1</span>, <span class='fl'>2</span>, <span class='fl'>3</span>,
              <span class='fl'>2</span>, <span class='fl'>1</span>, <span class='fl'>1</span>, <span class='fl'>1</span>,
              <span class='fl'>1</span>, <span class='fl'>2</span>, <span class='fl'>3</span>, <span class='fl'>0</span>,
              <span class='fl'>2</span>, <span class='fl'>1</span>, <span class='fl'>1</span>, <span class='fl'>0</span>,
              <span class='fl'>1</span>, <span class='fl'>0</span>, <span class='fl'>3</span>, <span class='fl'>2</span><span class='op'>)</span>, nrow <span class='op'>=</span> <span class='fl'>6</span>, byrow <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span><span class='op'>(</span><span class='va'>R</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"apple"</span>, <span class='st'>"banana"</span>, <span class='st'>"orange"</span>, <span class='st'>"pear"</span><span class='op'>)</span>
<span class='va'>R</span> <span class='op'>&lt;-</span> <span class='fu'>as.rankings</span><span class='op'>(</span><span class='va'>R</span><span class='op'>)</span>

<span class='co'># first three rankings</span>
<span class='va'>R</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span>,<span class='op'>]</span>
</div><div class='output co'>#&gt; [1] "apple &gt; banana"                 "banana &gt; orange &gt; pear &gt; apple"
#&gt; [3] "banana = orange = pear &gt; apple"</div><div class='input'>
<span class='co'># exclude pear from the rankings</span>
<span class='va'>R</span><span class='op'>[</span>, <span class='op'>-</span><span class='fl'>4</span><span class='op'>]</span>
</div><div class='output co'>#&gt; <span class='message'>Recoded rankings that are not in dense form</span></div><div class='output co'>#&gt; [1] "apple &gt; banana"          "banana &gt; orange &gt; apple"
#&gt; [3] "banana = orange &gt; apple" "apple &gt; banana &gt; orange"
#&gt; [5] "banana = orange &gt; apple" "apple &gt; orange"         </div><div class='input'>
<span class='co'># extract rankings 2 and 3 as numeric matrix</span>
<span class='va'>R</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>:</span><span class='fl'>3</span>, , as.rankings <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>]</span>
</div><div class='output co'>#&gt;      apple banana orange pear
#&gt; [1,]     4      1      2    3
#&gt; [2,]     2      1      1    1</div><div class='input'>
<span class='co'># same as</span>
<span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>as.matrix</a></span><span class='op'>(</span><span class='va'>R</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>:</span><span class='fl'>3</span>,<span class='op'>]</span>
</div><div class='output co'>#&gt;      apple banana orange pear
#&gt; [1,]     4      1      2    3
#&gt; [2,]     2      1      1    1</div><div class='input'>
<span class='co'># extract rankings for item 1 as a vector</span>
<span class='va'>R</span><span class='op'>[</span>,<span class='fl'>1</span>, as.rankings <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>]</span>
</div><div class='output co'>#&gt; [1] 1 4 2 1 2 1</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Heather Turner, Ioannis Kosmidis, David Firth.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


